# Officially Human Art — TODO

## Completed
- [x] Fix registration API response mismatch
- [x] Fix portfolio URL field name mismatch (portfolioUrl -> portfolio)
- [x] Fix portfolio URL input to accept bare domains
- [x] Separate artwork image from WIP evidence uploads
- [x] Per-file visibility controls for evidence
- [x] Writing-specific evidence guidance
- [x] Copyright notice on submission form
- [x] CSS watermark on displayed images
- [x] Downloadable certificate card (replaces QR on verify page)
- [x] Legal page (Terms, Privacy, Disclaimer, Copyright)
- [x] Password authentication for artist login
- [x] Certificate email on artwork registration
- [x] Embeddable website widget/badge for creators
- [x] Set up GitHub repo
- [x] Free/Creator pricing tiers with Stripe payment integration
- [x] "Our Story" section on landing page
- [x] Changed hero example to digital illustration (more relevant to AI risk)
- [x] Evidence visibility prompting (explain public vs private WIP files)
- [x] Increased watermark visibility on certificate images
- [x] Delete/withdraw certificates from dashboard
- [x] Edit certificate text (title, description, process notes)
- [x] Open Graph meta tags on verify page for social sharing previews
- [x] Live community stats counter on landing page
- [x] Log In button on homepage nav
- [x] Persistent storage (Railway volume) for data and uploads
- [x] Dispute/report button on certificate verify pages
- [x] Certificate timeline (issued, edited, reported history)
- [x] Public browse/explore page with filters and pagination
- [x] Password reset flow (forgot password + email reset link)
- [x] Rate limiting on login, registration, and password reset endpoints
- [x] Account deletion on demand (password-confirmed, deletes all data + files + Stripe sub)
- [x] Data protection risk assessment
- [x] General risk assessment
- [x] Security headers (helmet — CSP, HSTS, X-Frame-Options, X-Content-Type-Options, Referrer-Policy)
- [x] HTTPS enforcement (redirect + HSTS in production)
- [x] Server-side file type validation (JPEG, PNG, GIF, WebP only)
- [x] Randomised upload filenames (UUIDs instead of timestamp + original name)
- [x] Private evidence file access control (ownership-checked serving)
- [x] Self-hosted Google Fonts (eliminated external Google dependency)
- [x] Sanitised Stripe error messages (no internal details exposed to client)
- [x] Strengthened password policy (8+ chars, common password blocklist)
- [x] Legacy passwordless login removed (must use password reset)
- [x] Audit logging (structured JSON logs for auth, certificates, reports, account deletion)
- [x] Profile editing endpoint (PUT /api/artist/:artistId)
- [x] Input length limits on all text fields
- [x] Server-side session management (express-session with SQLite store)
- [x] CSRF protection on state-changing endpoints (double-submit cookie via csrf-csrf)
- [x] Persistent rate limiting (SQLite-backed, survives server restarts)
- [x] Migrate from JSON file to SQLite
- [x] Renamed "Date of Creation" label to "Date Registered" (defaults to today)
- [x] Unified auth header (Log In / Sign Out) on all pages
- [x] Automated backup strategy (daily SQLite backup with 7-day rotation, admin trigger endpoint)
- [x] Monitoring and alerting (GET /api/health — DB status, disk usage, uptime, error count, slow request logging)
- [x] Email verification on registration (verification email, submission gate, resend flow)
- [x] Admin/moderation panel (admin.html with report management, certificate revocation, dashboard stats)
- [x] Data export endpoint for DSAR compliance (GET /api/artist/:id/export — Art. 15/20 UK GDPR)
- [x] Data retention policy (24-month inactive account cleanup with 30-day warning grace period)
- [x] Copyright/takedown policy and process (structured form on legal page, POST /api/takedown endpoint)
- [x] Automated test suite for critical paths (25 tests via node:test — auth, CSRF, submission, admin, export, takedown)

## Pending
- [ ] Configure Stripe for production (set STRIPE_SECRET_KEY, STRIPE_PUBLISHABLE_KEY, STRIPE_WEBHOOK_SECRET, STRIPE_CREATOR_PRICE_ID on Railway)
  - Create Product + £5/month Price in Stripe dashboard, set up webhook endpoint
  - Register `checkout.session.completed` event in Stripe webhook settings (for one-time credit purchases)
- [ ] Set up custom domain email via GoDaddy
  - Buy domain on GoDaddy, add GoDaddy Workspace Email (or Microsoft 365)
  - Create mailbox e.g. noreply@officiallyhuman.art
  - Set Railway env vars: SMTP_HOST=smtpout.secureserver.net, SMTP_PORT=465, SMTP_USER=noreply@officiallyhuman.art, SMTP_PASS=<mailbox password>, SMTP_FROM=noreply@officiallyhuman.art
  - GoDaddy handles SPF/DKIM automatically for its own email
- [ ] Data processing agreements with Stripe, SMTP provider, Railway

## Technical Debt
- [ ] **Extract shared CSS** — `:root` variables and component styles are copy-pasted across 6 HTML files. Move to a shared stylesheet.
- [ ] **Extract shared header/footer** — Same logo and nav markup repeated in every page. Use server-side includes or a template engine.
- [ ] **Split server.js** — Single ~2500-line file. Split into route modules (auth, certificates, stripe, admin, etc.).
- [ ] **Extract email templates** — HTML email templates are inline template literals in server.js. Move to separate files.
- [ ] **Image optimisation** — Artwork images served as-is. Add resizing, compression, or WebP conversion on upload.
- [ ] **Error pages** — No custom 404 or 500 pages. Express falls through to default handler.
- [ ] **Loading states** — Dashboard and verification pages have no skeleton/loading UI while fetching.
- [ ] **Orphaned file cleanup** — Deleted certificates leave artwork and evidence files on disk.
- [ ] **Structured logging** — Replace console.log/console.error with a structured logger.
- [ ] **Frontend tests** — Only API tests exist. No unit tests for client-side JS or visual regression tests.
